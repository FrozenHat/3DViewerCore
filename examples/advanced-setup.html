<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Viewer - Advanced Config</title>
    <link rel="stylesheet" href="../src/styles/viewer.css">
    <style>
        .config-panel {
            position: absolute;
            top: 20px;
            right: 400px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            min-width: 250px;
            z-index: 100;
        }
        .config-panel h3 {
            margin: 0 0 15px 0;
            color: #333;
        }
        .config-panel label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
            font-size: 14px;
        }
        .config-panel input[type="range"] {
            flex: 1;
            margin: 0 10px;
        }
        .preset-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .preset-buttons button {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 6px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }
        .preset-buttons button:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    
    <script src="../dist/bundle.js"></script>
    <script>
        window.addEventListener('load', () => {
            console.log('üé¨ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è viewer...');
            console.log('ViewerLib:', window.ViewerLib);
            
            // ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Viewer
            if (!window.Viewer) {
                console.error('‚ùå window.Viewer –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                return;
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ viewer —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
            const viewer = new window.Viewer('container', {
                animations: {
                    pauseOnFocus: true
                },
                lighting: {
                    ambient: { 
                        enabled: true, 
                        color: 0xffffff, 
                        intensity: 0.6 
                    },
                    directional: { 
                        enabled: true, 
                        color: 0xffffff, 
                        intensity: 0.8, 
                        position: { x: 10, y: 10, z: 10 }, 
                        castShadow: true 
                    },
                    hdri: {
                    enabled: true,
                    url: './hdri/studio_small_08_1k.hdr', // ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
                    intensity: 1.0,
                    background: true // ‚úÖ –§–æ–Ω –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ HDRI
                }
                },
                // ‚úÖ –î–û–ë–ê–í–¨–¢–ï HDRI
                hdri: {
                    enabled: true,
                    url: './hdri/studio_small_08_1k.hdr', // ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
                    intensity: 1.0,
                    background: true // ‚úÖ –§–æ–Ω –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ HDRI
                }
            });
            
            viewer.init();
            viewer.render();
            viewer.loadModel('./models/AnimTestModel3.glb');
            
            console.log('‚úÖ Viewer –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            console.log('–ú–µ—Ç–æ–¥—ã viewer:', Object.getOwnPropertyNames(Object.getPrototypeOf(viewer)));
            
            // ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Ambient
            document.getElementById('ambient-intensity').addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                document.getElementById('ambient-value').textContent = value.toFixed(1);
                
                viewer.updateLighting({
                    ambient: { 
                        enabled: true, 
                        color: 0xffffff, 
                        intensity: value 
                    }
                });
            });
            
            // ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Directional
            document.getElementById('directional-intensity').addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                document.getElementById('directional-value').textContent = value.toFixed(1);
                
                viewer.updateLighting({
                    directional: { 
                        enabled: true, 
                        color: 0xffffff, 
                        intensity: value, 
                        position: { x: 10, y: 10, z: 10 }, 
                        castShadow: true 
                    }
                });
            });
            
            // ‚úÖ –ü—Ä–µ—Å–µ—Ç—ã
            document.getElementById('preset-studio').addEventListener('click', () => {
                console.log('üé® –ü—Ä–∏–º–µ–Ω—è–µ–º Studio preset');
                if (window.ViewerLib?.studioPreset?.lighting) {
                    viewer.updateLighting(window.ViewerLib.studioPreset.lighting);
                } else {
                    console.error('‚ùå studioPreset –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            });
            
            document.getElementById('preset-outdoor').addEventListener('click', () => {
                console.log('üé® –ü—Ä–∏–º–µ–Ω—è–µ–º Outdoor preset');
                if (window.ViewerLib?.outdoorPreset?.lighting) {
                    viewer.updateLighting(window.ViewerLib.outdoorPreset.lighting);
                } else {
                    console.error('‚ùå outdoorPreset –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            });
            
            document.getElementById('preset-dark').addEventListener('click', () => {
                console.log('üé® –ü—Ä–∏–º–µ–Ω—è–µ–º Dark preset');
                if (window.ViewerLib?.darkPreset?.lighting) {
                    viewer.updateLighting(window.ViewerLib.darkPreset.lighting);
                } else {
                    console.error('‚ùå darkPreset –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            });
        });
    </script>
</body>
</html>